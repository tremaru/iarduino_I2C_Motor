[![](https://iarduino.ru/img/logo.svg)](https://iarduino.ru)[![](https://wiki.iarduino.ru/img/git-shop.svg?3)](https://iarduino.ru) [![](https://wiki.iarduino.ru/img/git-wiki.svg?2)](https://wiki.iarduino.ru) [![](https://wiki.iarduino.ru/img/git-lesson.svg?2)](https://lesson.iarduino.ru)[![](https://wiki.iarduino.ru/img/git-forum.svg?2)](http://forum.trema.ru)

**This is a library for Arduino IDE. It allows to work with [Motor](https://iarduino.ru/shop/Mehanika/motor-reduktor-n20-500rpm-s-upravlyayuschim-kontrollerom-flash-i2c.html) module made by iArduino.ru**

**Данная библиотека для Arduino IDE позволяет работать с модулем [Мотор-редуктор с энкодером N20-100rpm-12V с управляющим контроллером](https://iarduino.ru/shop/Mehanika/motor-reduktor-n20-500rpm-s-upravlyayuschim-kontrollerom-flash-i2c.html) и модулем [Мотор-редуктор без энкодера N20-100rpm-12V, с управляющим контроллером](https://iarduino.ru/shop/Mehanika/motor-reduktor-bez-enkodera-n20-100rpm-12v-s-upravlyayuschim-kontrollerom-flash-i2c.html) от [iArduino.ru](https://iarduino.ru)**

> Подробнее про установку библиотеки читайте в нашей [инструкции](https://wiki.iarduino.ru/page/Installing_libraries/).

> Подробнее про подключение к [Arduino UNO](https://iarduino.ru/shop/boards/arduino-uno-r3.html)/[Piranha UNO](https://iarduino.ru/shop/boards/piranha-uno-r3.html) читайте на нашей [wiki](https://wiki.iarduino.ru/page/motor-driver-i2c/)


| Модель | Ссылка на магазин |
|---|---|
| <p></p> <img src="https://wiki.iarduino.ru/img/resources/1297/1297.svg" width="100px"></img><p> С энкодером </p> | https://iarduino.ru/shop/Mehanika/motor-reduktor-n20-500rpm-s-upravlyayuschim-kontrollerom-flash-i2c.html |
| <p></p> <img src="https://wiki.iarduino.ru/img/resources/1402/1402.svg" width="100px"></img><p> Без энкодера </p>| https://iarduino.ru/shop/Mehanika/motor-reduktor-bez-enkodera-n20-100rpm-12v-s-upravlyayuschim-kontrollerom-flash-i2c.html |

## Назначение функций:

**Подключаем библиотеку**

```C++
#include <iarduino_I2C_Motor.h> // Подключаем библиотеку iarduino_I2C_Motor для работы с модулем.
```

**Создаём объект**

```C++
iarduino_I2C_Motor ОБЪЕКТ; // Создаём объект для работы с методами библиотеки без указания адреса модуля на шине I2C.

iarduino_I2C_Motor ОБЪЕКТ( АДРЕС ); // Создаём объект для работы с методами библиотеки указывая адрес модуля на шине I2C.
```

**Инициализация работы**

```C++
ОБЪЕКТ.begin(); // Инициализация работы с модулем.
```

**Изменение адреса модуля**

```C++
ОБЪЕКТ.changeAddress( АДРЕС ); // Изменение адреса модуля на шине I2C.
```

**Перезагрузка модуля**

```C++
ОБЪЕКТ.reset(); // Перезагрузка модуля.
```

**Получение текущего адреса**

```C++
ОБЪЕКТ.getAddress(); // Получение текущего адреса модуля на шине I2C.
```

**Получение версии прошивки**

```C++
ОБЪЕКТ.getVersion(); // Получение версии прошивки модуля.
```

**Управление внутрисхемной подтяжкой**

```C++
ОБЪЕКТ.setPullI2C( \[ФЛАГ\] ); // Управление внутрисхемной подтяжкой линий шины I2C.
```

**Запрос состояния внутрисхемной подтяжки**

```C++
ОБЪЕКТ.getPullI2C(); // Запрос состояния внутрисхемной подтяжки линий шины I2C.
```

**Установка скорости**

```C++
ОБЪЕКТ.setSpeed( СКОРОСТЬ, ТИП \[, УСЛОВИЕ, ТИП \] ); // Установка скорости.
```

**Получение реальной скорости или ШИМ**

```C++
ОБЪЕКТ.getSpeed( ТИП ); // Получение реальной скорости или ШИМ.
```

**Остановка мотора с условием или без**

```C++
ОБЪЕКТ.setStop( \[ УСЛОВИЕ, ТИП \] ); // Остановка мотора с условием или без.
```

**Получение значения оставшегося до остановки**

```C++
ОБЪЕКТ.getStop( ТИП ); // Получение значения оставшегося до остановки.
```

**Установка нейтрального положения при остановке**

```C++
ОБЪЕКТ.setStopNeutral( ФЛАГ ); // Установка нейтрального положения при остановке.
```

**Получение установленного поведения мотора при остановке**

```C++
ОБЪЕКТ.getStopNeutral(); // Получение установленного поведения мотора при остановке.
```

**Получение количества совершённых оборотов или пути**

```C++
ОБЪЕКТ.getSum( ТИП ); // Получение количества совершённых оборотов или пути.
```

**Сброс количества совершённых оборотов и пройденного пути**

```C++
ОБЪЕКТ.delSum(); // Сброс количества совершённых оборотов и пройденного пути.
```

**Установка направления вращения**

```C++
ОБЪЕКТ.setDirection( ФЛАГ ); // Установка направления вращения вала.
```

**Получение направления вращения**

```C++
ОБЪЕКТ.getDirection(); // Получение направления вращения вала.
```

**Установка флагов инверсии**

```C++
ОБЪЕКТ.setInvGear( РЕДУКТОР, МОТОР ); // Установка флагов инверсии механизма.
```

**Получение флагов инверсии**

```C++
ОБЪЕКТ.getInvGear(); // Получение флагов инверсии механизма.
```

**Установка частоты ШИМ**

```C++
ОБЪЕКТ.setFreqPWM( ЧАСТОТА ); // Установка частоты ШИМ подаваемого на мотор.
```

**Установка количества полюсов магнитного вала**

```C++
ОБЪЕКТ.setMagnet( КОЛИЧЕСТВО ); // Установка количества полюсов магнитного вала.
```

**Получение количества полюсов магнитного вала**

```C++
ОБЪЕКТ.getMagnet(); // Получение количества полюсов магнитного вала.
```

**Установка передаточного отношения**

```C++
ОБЪЕКТ.setReducer( ОТНОШЕНИЕ ); // Установка передаточного отношения редуктора.
```

**Получение передаточного отношения**

```C++
ОБЪЕКТ.getReducer(); // Получение передаточного отношения редуктора.
```

**Установка процента отклонения**

```C++
ОБЪЕКТ.setError( ПРОЦЕНТ ); // Установка процента отклонения скорости до ошибки.
```

**Получение наличия ошибки**

```C++
ОБЪЕКТ.getError(); // Получение наличия ошибки модуля.
```

**Получение номинального напряжения**

```C++
ОБЪЕКТ.getVoltage(); // Получение номинального напряжения питания электродвигателя.
```

**Установка значения для getVoltage()**

```C++
ОБЪЕКТ.setVoltage( НАПРЯЖЕНИЕ ); // Установка значения для функции getVoltage().
```

**Получение номинальной скорости**

```C++
ОБЪЕКТ.getNominalRPM(); // Получение номинальной скорости вращения вала.
```

**Установка значения для для функции getNominalRPM()**

```C++
ОБЪЕКТ.setNominalRPM( СКОРОСТЬ ); // Установка значения для функции getNominalRPM().
```
